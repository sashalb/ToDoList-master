<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>To Do List</title>
       

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>
      
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src= "https://code.jquery.com/jquery-3.6.0.min.js"> </script>
        
        <link href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" rel="stylesheet" type="text/css">
        
        <link href="css/style.css" rel="stylesheet" type="text/css">
    </head>
<<<<<<< HEAD

    <script>
        function DeleteItem(id)
        {
          if (confirm("Delete this item?"))
          {
            $.ajax({
                type: 'post',
                url: '/deleteitem',
                data: { 
                    'IdItem': id
                },
                success: function (data) {
                  window.location.href = "/edit";
                }
            })
          } 
        }

        function ToggleStatus(id,status)
        {
          $.ajax({
              type: 'post',
              url: '/togglestatus',
              data: { 
                  'IdItem': id,
                  'Status': status
              },
              success: function (data) {
                window.location.href = "/edit";
              }
          })  
=======
    <script>
      
        function DeleteItem(id)
        {
            if (confirm("Are you sure?"))
            {
              $.ajax({
                  type: 'post',
                  url: '/deleteitem',
                  data: { 
                      'IdItem': id
                  },
                  success: function (data) {
                    window.location.href = "/edit";
                  }
              })
            }
          
        }
        function ToggleStatus(id,status)
        {
           
              $.ajax({
                  type: 'post',
                  url: '/togglestatus',
                  data: { 
                      'IdItem': id,
                      'Status': status
                  },
                  success: function (data) {
                    window.location.href = "/edit";
                  }
              })
           
          
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43
        }
    </script>

    <body OnLoad="document.myform.description.focus();">
<<<<<<< HEAD


=======
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43
      <div id="topbar"> 
        <img src="https://cdn.pixabay.com/photo/2014/04/03/10/32/businessman-310819_960_720.png" class="img-fluid profile-image-pic img-thumbnail rounded-circle my-3"
        width="50px" alt="profile" style="margin-left: 25px;">
        <a id="title"><%= username %>'s To Do List</a>
      </div>
<<<<<<< HEAD
      
=======
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
<<<<<<< HEAD

            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <div class="navbar-nav">
                <a class="nav-item nav-link" href="/profile">Profile</a>
                <a class="nav-item nav-link" href="/lists">My Lists</a>
                <form id="logout-btn" action="/logout?_method=DELETE" method="POST">
                    <button class="nav-item nav-link" type="submit" style ="border-width:0px;background-color: transparent;cursor:pointer" onclick="return confirm('Logout form this account?');">Logout</button>
                </form>
              </div>
            </div>

        </nav>

=======
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
              <div class="navbar-nav">
                <!-- <a class="nav-item nav-link active" href="/edit">Edit <span class="sr-only">(current)</span></a> -->
                <a class="nav-item nav-link" href="/profile">Profile</a>
                <a class="nav-item nav-link" href="/lists">My Lists</a>
                <!-- <a class="nav-item nav-link" onclick="darkMode()">Dark/Light</a> -->
                <form id="logout-btn" action="/logout?_method=DELETE" method="POST">
                    <button class="nav-item nav-link" type="submit" style ="border-width:0px;background-color: transparent;cursor:pointer" onclick="return confirm('Logout form this account?');">Logout</button>
                </form>
                <!-- <a class="nav-item nav-link" onclick="darkMode()" style="cursor: pointer;">Dark/Light</a> -->
                <!-- <div>
                <input type="checkbox"  id="darkmodeButton" onchange="darkMode()" checked data-toggle="toggle" data-size="xs" >
            </div> -->
              </div>
            </div>
          </nav>
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43
        <header>
            <div class="top-container">
                <h3>Current list: <%= descriptionList %></h3><br>
            </div>
        </header>

        <div class="top-container">
          <a>Need to remember something? Write it down here!</a>
          <%
          if(listindex!=-1)
          { %>
<<<<<<< HEAD

            <form  action="/insertitemlist" method="POST" name="myform">
              <div class="input-group">
                  <input type="text" class="form-control" placeholder="Write something..." aria-describedby="button-addon2" id="description" name="description">
                  <input type="hidden" class="form-control"id="listId" name="listId" value=<%= listindex %>>
                  <div class="input-group-append">
                      <button class="btn btn-outline-secondary" type="submit" id="add-item">Add Item</button>
                  </div>
                  
              </div>
            </form>

          <%} 
          %>
=======
          <form  action="/insertitemlist" method="POST" name="myform">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Write something..." aria-describedby="button-addon2" id="description" name="description">
                <input type="hidden" class="form-control"id="listId" name="listId" value=<%= listindex %>>
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="submit" id="add-item">Add Item</button>
                </div>
                
            </div>
          </form>
          <%} 
          %>
         <!--  <button type="button" data-toggle="modal" data-target="#exampleModal"  class="btn btn-outline-secondary" style="margin-top: 3px;" id="save">Save List</button>

          <div class="listholderstyle">
              <ul class="list-group list-group-flush" id="list-holder"></ul>
          </div> -->
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43

            <table id="listsTable" data-paging="false" class="table">
              <thead  class="thead-dark">
                <tr>
                  <th scope="col"></th>
                  <th scope="col" style="width: 80px;" ></th>
                  <th scope="col">Description</th>
                  <th scope="col">Date</th>
<<<<<<< HEAD
                </tr>
              </thead>

=======
             
                </tr>
              </thead>
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43
              <%
              if(messages.allRowsItems!=null)
              {
                for(let row of messages.allRowsItems ){%>
<<<<<<< HEAD
                   
=======
                 
                  
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43
                  <tbody>
                      <tr  >
                          <td style="cursor: pointer;"><i onclick="DeleteItem(<%= row.Id %>)" class="fa fa-trash" aria-hidden="true"></i></td>
                          <% var status= ""; 
                            if(row.Status==1) 
                               status="<i style='color:green;' class='far fa-check-circle' aria-hidden='true'>";
                            else
                               status="";
                          %>
                          
                          <td ><%- status %></td>
                          <td style="cursor: pointer;" onclick="ToggleStatus(<%= row.Id %>,<%= row.Status %>)"><%= row.Descrizione %></td>
                          <td  ><%= row.Timestamp %></td>
                          
                      </tr>
                  </tbody>
                  <% }
              } 
              %>
          </table>     
        </div>

      
<<<<<<< HEAD
      </body>


      <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
      <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap4.min.js"></script>

=======

        
      </body>
      <script src="script/script.js"></script>
      <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
      <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap4.min.js"></script>
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43
      <script>
          $(document).ready(function () {
          $('#listsTable').DataTable();
      });
      </script>
<<<<<<< HEAD


=======
>>>>>>> c74b2b9689d36f84521e5d743f16ae23bb2a0c43
</html>